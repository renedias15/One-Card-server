<!DOCTYPE html>
<html>
<head>
  <link rel="stylesheet" href="styles.css">
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha2/css/bootstrap.min.css">
  <link rel="icon" type="image/x-icon" href="../static/images/logo.png">
  <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">

  <style>
    .card {
      height: 220px;
      width: 440px;
      /*background-image: url('../static/images/card_bg.jpg');*/
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
      border-radius: 8px;
      box-shadow: 0 2px 4px rgba(255, 0, 0, 0.1);
      padding-left: 20px;
      margin-left: auto;
      margin-right: auto;
      margin-top: 5%;
      font-family: Verdana;
      position: relative;
      display: flex;
      justify-content: center;
      align-items: center;
      background-color: #242424;
    }
    
    .card h3 {
      margin: 0;
      position: absolute;
      top: 5px;
      left: 20px;
      color: rgb(183, 0, 255);
      font-size: 40px;
      font-family: 'Montserrat', sans-serif;
      z-index: 999;
      line-height: 1.8;
    }
    
    .card p {
      margin: 0;
      color: rgb(238, 255, 0);
      font-family: 'Montserrat', sans-serif;
      letter-spacing: 4px;
      line-height: 0.8;
      font-size: 25px;
    }

    .gradient-custom {
      background: #6a11cb;
      background: -webkit-linear-gradient(to right, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1));
      background: linear-gradient(to right, rgba(106, 17, 203, 1), rgba(37, 117, 252, 1))
    }
    
    .qr-code {
      position: absolute;
      bottom: 3px;
      right: 3px;
    }
    
    .qr-code img {
      width: 55px;
      height: 55px;
    }
    
  </style>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
 
</head>
<body class="gradient-custom">
  <nav class="navbar navbar-expand-lg">
    <a class="navbar-brand" href="#"><img src="../static/images/logo.png" alt="Logo" height="50" width="70" style="margin-left: 30px;"></a>
    <!-- <div style="margin-left:50%;  "> 
      <form action="admin_new.html">
        <button type="submit" class="button">Admin</button>
      </form>
    </div> -->
    <a href="/">Home</a>
  <a href="/about_us">About</a>
  <a href="/admin_login">Admin</a>
  <a href="/instructions">Instructions</a>
  <a href="/contact_us">Contact</a>
  </nav>
  <div id="card" class="card">
    <h3 class="gradient-color">
      One Card
    </h3>
    <p id="formattedNumber" style="font-family: sans-serif; font-weight: bold; "></p>
    <div class="qr-code">
      <img src="data:image/png;base64,{{ qr_code }}" alt="QR Code">
    </div>
  </div>
  <script src="https://stackpath.bootstrapcdn.com/bootstrap/5.0.0-alpha2/js/bootstrap.min.js"></script>
  <script src="https://html2canvas.hertzen.com/dist/html2canvas.min.js"></script>
<script>
  window.addEventListener('load', function() {
    var card = document.getElementById('card');
    html2canvas(card).then(function(canvas) {
      var imageUrl = canvas.toDataURL();
      applyGradientToImage(imageUrl);
    });
  });

  function applyGradientToImage(imageUrl) {
    // Download the generated card image
    var link = document.createElement('a');
    link.href = imageUrl;
    link.download = 'card.png';
    link.click();
  }
    var number = {{key}};
    var numberString = number.toString();
    var formattedNumber = numberString.replace(/(.{4})/g, '$1 ');
    document.getElementById("formattedNumber").textContent = formattedNumber;
  </script>
</body>
</html>
